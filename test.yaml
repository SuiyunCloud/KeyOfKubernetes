apiVersion: v1
kind: Pod
metadata:
  name: init-demo
  annotations:
    FC_CONFIGMAP_NAME: 73eb1fc17260838b0f8853137c7b98e9-attempt
    FC_CONFIGMAP_UID: 4d133447-b6f9-45bd-9fc7-580931428ac2
    FC_FRAMEWORK_ATTEMPT_ID: "2"
    FC_FRAMEWORK_ATTEMPT_INSTANCE_UID: 2_4d133447-b6f9-45bd-9fc7-580931428ac2
    FC_FRAMEWORK_NAME: 73eb1fc17260838b0f8853137c7b98e9
    FC_FRAMEWORK_NAMESPACE: default
    FC_FRAMEWORK_UID: 8657e048-4fc8-447e-88f6-1345a224d89f
    FC_POD_NAME: 73eb1fc17260838b0f8853137c7b98e9-taskrole-0
    FC_TASK_ATTEMPT_ID: "0"
    FC_TASK_INDEX: "0"
    FC_TASK_UID: 1591de14-bf89-11ec-ac74-828783dcb2e6
    FC_TASKROLE_NAME: taskrole
    FC_TASKROLE_UID: 1591ddfd-bf89-11ec-ac74-828783dcb2e6
    container.apparmor.security.beta.kubernetes.io/app: unconfined
    hivedscheduler.microsoft.com/pod-scheduling-spec: |
      virtualCluster: vc2
      priority: 10
      pinnedCellId: null
      leafCellType: gpu-machine
      leafCellNumber: 1
      affinityGroup:
        name: admin~admin_8ff14934/default
        members:
          - podNumber: 1
            leafCellNumber: 1
    rest-server/port-scheduling-spec: '{"schedulePortStart":15000,"schedulePortEnd":40000,"ports":{"ssh":{"count":1},"http":{"count":1}}}'
  labels:
    FC_FRAMEWORK_NAME: 73eb1fc17260838b0f8853137c7b98e9
    FC_TASK_INDEX: "0"
    FC_TASKROLE_NAME: taskrole
    type: kube-launcher-task
    userName: admin
    virtualCluster: vc2
spec:
  containers:
    - name: nginx
      image: nginx
      ports:
        - containerPort: 80
      resources:
        limits:
          memory: '1Gi'
          cpu: '800m'
          hivedscheduler.microsoft.com/pod-scheduling-enable:  1
        requests:
          memory: '700Mi'
          cpu: '400m'
          hivedscheduler.microsoft.com/pod-scheduling-enable:  1



apiVersion: v1
kind: Pod
metadata:
  annotations:
    FC_CONFIGMAP_NAME: 73eb1fc17260838b0f8853137c7b98e9-attempt
    FC_CONFIGMAP_UID: 4d133447-b6f9-45bd-9fc7-580931428ac2
    FC_FRAMEWORK_ATTEMPT_ID: "2"
    FC_FRAMEWORK_ATTEMPT_INSTANCE_UID: 2_4d133447-b6f9-45bd-9fc7-580931428ac2
    FC_FRAMEWORK_NAME: 73eb1fc17260838b0f8853137c7b98e9
    FC_FRAMEWORK_NAMESPACE: default
    FC_FRAMEWORK_UID: 8657e048-4fc8-447e-88f6-1345a224d89f
    FC_POD_NAME: 73eb1fc17260838b0f8853137c7b98e9-taskrole-0
    FC_TASK_ATTEMPT_ID: "0"
    FC_TASK_INDEX: "0"
    FC_TASK_UID: 1591de14-bf89-11ec-ac74-828783dcb2e6
    FC_TASKROLE_NAME: taskrole
    FC_TASKROLE_UID: 1591ddfd-bf89-11ec-ac74-828783dcb2e6
    container.apparmor.security.beta.kubernetes.io/app: unconfined
    hivedscheduler.microsoft.com/pod-scheduling-spec: |
      virtualCluster: vc2
      priority: 10
      pinnedCellId: null
      leafCellType: gpu-machine
      leafCellNumber: 1
      affinityGroup:
        name: admin~admin_8ff14934/default
        members:
          - podNumber: 1
            leafCellNumber: 1
    rest-server/port-scheduling-spec: '{"schedulePortStart":15000,"schedulePortEnd":40000,"ports":{"ssh":{"count":1},"http":{"count":1}}}'
  creationTimestamp: "2022-04-19T02:33:23Z"
  labels:
    FC_FRAMEWORK_NAME: 73eb1fc17260838b0f8853137c7b98e9
    FC_TASK_INDEX: "0"
    FC_TASKROLE_NAME: taskrole
    type: kube-launcher-task
    userName: admin
    virtualCluster: vc2
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .: {}
          f:FC_CONFIGMAP_NAME: {}
          f:FC_CONFIGMAP_UID: {}
          f:FC_FRAMEWORK_ATTEMPT_ID: {}
          f:FC_FRAMEWORK_ATTEMPT_INSTANCE_UID: {}
          f:FC_FRAMEWORK_NAME: {}
          f:FC_FRAMEWORK_NAMESPACE: {}
          f:FC_FRAMEWORK_UID: {}
          f:FC_POD_NAME: {}
          f:FC_TASK_ATTEMPT_ID: {}
          f:FC_TASK_INDEX: {}
          f:FC_TASK_UID: {}
          f:FC_TASKROLE_NAME: {}
          f:FC_TASKROLE_UID: {}
          f:container.apparmor.security.beta.kubernetes.io/app: {}
          f:hivedscheduler.microsoft.com/pod-scheduling-spec: {}
          f:rest-server/port-scheduling-spec: {}
        f:labels:
          .: {}
          f:FC_FRAMEWORK_NAME: {}
          f:FC_TASK_INDEX: {}
          f:FC_TASKROLE_NAME: {}
          f:type: {}
          f:userName: {}
          f:virtualCluster: {}
        f:ownerReferences:
          .: {}
          k:{"uid":"4d133447-b6f9-45bd-9fc7-580931428ac2"}:
            .: {}
            f:apiVersion: {}
            f:blockOwnerDeletion: {}
            f:controller: {}
            f:kind: {}
            f:name: {}
            f:uid: {}
      f:spec:
        f:affinity:
          .: {}
          f:nodeAffinity:
            .: {}
            f:requiredDuringSchedulingIgnoredDuringExecution:
              .: {}
              f:nodeSelectorTerms: {}
        f:containers:
          k:{"name":"app"}:
            .: {}
            f:command: {}
            f:env:
              .: {}
              k:{"name":"FC_CONFIGMAP_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_CONFIGMAP_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_ATTEMPT_ID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_ATTEMPT_INSTANCE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_NAMESPACE"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_POD_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_POD_UID"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"FC_TASK_ATTEMPT_ID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_ATTEMPT_INSTANCE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_INDEX"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASKROLE_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASKROLE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"HIVED_VISIBLE_DEVICES"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"NVIDIA_VISIBLE_DEVICES"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"PAI_CURRENT_TASK_ROLE_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_DEFAULT_FS_URI"}:
                .: {}
                f:name: {}
              k:{"name":"PAI_FRAMEWORK_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_ROLE_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_ROLE_LIST"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_MIN_FAILED_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_MIN_SUCCEEDED_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_RESOURCE_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_INDEX"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"PAI_TASK_ROLE_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLE_LIST"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLE_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLES_NUM"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASKS_NUM"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_USER_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_USERNAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_VIRTUAL_CLUSTER"}:
                .: {}
                f:name: {}
                f:value: {}
            f:image: {}
            f:imagePullPolicy: {}
            f:name: {}
            f:resources:
              .: {}
              f:limits:
                .: {}
                f:cpu: {}
                f:github.com/fuse: {}
                f:hivedscheduler.microsoft.com/pod-scheduling-enable: {}
                f:memory: {}
              f:requests:
                .: {}
                f:cpu: {}
                f:github.com/fuse: {}
                f:hivedscheduler.microsoft.com/pod-scheduling-enable: {}
                f:memory: {}
            f:securityContext:
              .: {}
              f:capabilities:
                .: {}
                f:add: {}
                f:drop: {}
            f:terminationMessagePath: {}
            f:terminationMessagePolicy: {}
            f:volumeMounts:
              .: {}
              k:{"mountPath":"/dev/shm"}:
                .: {}
                f:mountPath: {}
                f:name: {}
              k:{"mountPath":"/usr/local/pai"}:
                .: {}
                f:mountPath: {}
                f:name: {}
              k:{"mountPath":"/usr/local/pai/logs"}:
                .: {}
                f:mountPath: {}
                f:name: {}
                f:subPath: {}
              k:{"mountPath":"/usr/local/pai/ssh-secret"}:
                .: {}
                f:mountPath: {}
                f:name: {}
                f:readOnly: {}
              k:{"mountPath":"/usr/local/pai/user-extension-secrets"}:
                .: {}
                f:mountPath: {}
                f:name: {}
        f:dnsPolicy: {}
        f:enableServiceLinks: {}
        f:hostNetwork: {}
        f:imagePullSecrets:
          .: {}
          k:{"name":"pai-secret"}:
            .: {}
            f:name: {}
        f:initContainers:
          .: {}
          k:{"name":"init"}:
            .: {}
            f:env:
              .: {}
              k:{"name":"FC_CONFIGMAP_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_CONFIGMAP_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_ATTEMPT_ID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_ATTEMPT_INSTANCE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_NAMESPACE"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_FRAMEWORK_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_POD_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_POD_UID"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"FC_TASK_ATTEMPT_ID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_ATTEMPT_INSTANCE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_INDEX"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASK_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASKROLE_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"FC_TASKROLE_UID"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"GANG_ALLOCATION"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"KUBE_APISERVER_ADDRESS"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX"}:
                .: {}
                f:name: {}
                f:valueFrom:
                  .: {}
                  f:fieldRef:
                    .: {}
                    f:apiVersion: {}
                    f:fieldPath: {}
              k:{"name":"PAI_CURRENT_TASK_ROLE_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_DEFAULT_FS_URI"}:
                .: {}
                f:name: {}
              k:{"name":"PAI_FRAMEWORK_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_ROLE_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_JOB_TASK_ROLE_LIST"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_MIN_FAILED_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_MIN_SUCCEEDED_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_RESOURCE_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLE_COUNT"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLE_LIST"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLE_TASK_COUNT_taskrole"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASK_ROLES_NUM"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_TASKS_NUM"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_USER_NAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_USERNAME"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"PAI_VIRTUAL_CLUSTER"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"REST_SERVER_URI"}:
                .: {}
                f:name: {}
                f:value: {}
              k:{"name":"USER_CMD"}:
                .: {}
                f:name: {}
                f:value: {}
            f:image: {}
            f:imagePullPolicy: {}
            f:name: {}
            f:resources: {}
            f:terminationMessagePath: {}
            f:terminationMessagePolicy: {}
            f:volumeMounts:
              .: {}
              k:{"mountPath":"/usr/local/pai"}:
                .: {}
                f:mountPath: {}
                f:name: {}
              k:{"mountPath":"/usr/local/pai-config"}:
                .: {}
                f:mountPath: {}
                f:name: {}
              k:{"mountPath":"/usr/local/pai/logs"}:
                .: {}
                f:mountPath: {}
                f:name: {}
                f:subPath: {}
              k:{"mountPath":"/usr/local/pai/user-extension-secrets"}:
                .: {}
                f:mountPath: {}
                f:name: {}
        f:priorityClassName: {}
        f:restartPolicy: {}
        f:schedulerName: {}
        f:securityContext: {}
        f:serviceAccount: {}
        f:serviceAccountName: {}
        f:terminationGracePeriodSeconds: {}
        f:volumes:
          .: {}
          k:{"name":"dshm"}:
            .: {}
            f:emptyDir:
              .: {}
              f:medium: {}
              f:sizeLimit: {}
            f:name: {}
          k:{"name":"host-log"}:
            .: {}
            f:hostPath:
              .: {}
              f:path: {}
              f:type: {}
            f:name: {}
          k:{"name":"job-exit-spec"}:
            .: {}
            f:configMap:
              .: {}
              f:defaultMode: {}
              f:name: {}
            f:name: {}
          k:{"name":"job-ssh-secret-volume"}:
            .: {}
            f:name: {}
            f:secret:
              .: {}
              f:defaultMode: {}
              f:secretName: {}
          k:{"name":"pai-vol"}:
            .: {}
            f:emptyDir: {}
            f:name: {}
          k:{"name":"user-extension-secrets"}:
            .: {}
            f:name: {}
            f:secret:
              .: {}
              f:defaultMode: {}
              f:secretName: {}
    manager: frameworkcontroller
    operation: Update
    time: "2022-04-19T02:33:23Z"
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:status:
        f:conditions:
          .: {}
          k:{"type":"PodScheduled"}:
            .: {}
            f:lastProbeTime: {}
            f:lastTransitionTime: {}
            f:message: {}
            f:reason: {}
            f:status: {}
            f:type: {}
    manager: kube-scheduler
    operation: Update
    time: "2022-04-20T00:21:50Z"
  name: 73eb1fc17260838b0f8853137c7b98e9-taskrole-0
  namespace: default
  ownerReferences:
  - apiVersion: v1
    blockOwnerDeletion: true
    controller: true
    kind: ConfigMap
    name: 73eb1fc17260838b0f8853137c7b98e9-attempt
    uid: 4d133447-b6f9-45bd-9fc7-580931428ac2
  resourceVersion: "21182602"
  selfLink: /api/v1/namespaces/default/pods/73eb1fc17260838b0f8853137c7b98e9-taskrole-0
  uid: 0ac29b9c-6e10-4d72-8b37-4bb42cc57d09
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: pai-worker
            operator: In
            values:
            - "true"
  containers:
  - command:
    - /usr/local/pai/runtime
    env:
    - name: FC_FRAMEWORK_NAMESPACE
      value: default
    - name: FC_FRAMEWORK_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9
    - name: FC_TASKROLE_NAME
      value: taskrole
    - name: FC_TASK_INDEX
      value: "0"
    - name: FC_CONFIGMAP_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9-attempt
    - name: FC_POD_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9-taskrole-0
    - name: FC_FRAMEWORK_UID
      value: 8657e048-4fc8-447e-88f6-1345a224d89f
    - name: FC_FRAMEWORK_ATTEMPT_ID
      value: "2"
    - name: FC_FRAMEWORK_ATTEMPT_INSTANCE_UID
      value: 2_4d133447-b6f9-45bd-9fc7-580931428ac2
    - name: FC_CONFIGMAP_UID
      value: 4d133447-b6f9-45bd-9fc7-580931428ac2
    - name: FC_TASKROLE_UID
      value: 1591ddfd-bf89-11ec-ac74-828783dcb2e6
    - name: FC_TASK_UID
      value: 1591de14-bf89-11ec-ac74-828783dcb2e6
    - name: FC_TASK_ATTEMPT_ID
      value: "0"
    - name: FC_POD_UID
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.uid
    - name: FC_TASK_ATTEMPT_INSTANCE_UID
      value: 0_$(FC_POD_UID)
    - name: PAI_FRAMEWORK_NAME
      value: admin~admin_8ff14934
    - name: PAI_JOB_NAME
      value: admin~admin_8ff14934
    - name: PAI_USER_NAME
      value: admin
    - name: PAI_DEFAULT_FS_URI
    - name: PAI_TASK_ROLE_COUNT
      value: "1"
    - name: PAI_TASK_ROLE_LIST
      value: taskrole
    - name: PAI_VIRTUAL_CLUSTER
      value: vc2
    - name: PAI_TASK_ROLE_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_RESOURCE_taskrole
      value: 1,6,127051,0
    - name: PAI_MIN_FAILED_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_MIN_SUCCEEDED_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_USERNAME
      value: admin
    - name: PAI_TASKS_NUM
      value: "1"
    - name: PAI_JOB_TASK_COUNT
      value: "1"
    - name: PAI_TASK_ROLES_NUM
      value: "1"
    - name: PAI_JOB_TASK_ROLE_COUNT
      value: "1"
    - name: PAI_JOB_TASK_ROLE_LIST
      value: taskrole
    - name: PAI_CURRENT_TASK_ROLE_NAME
      value: taskrole
    - name: PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.annotations['FC_TASK_INDEX']
    - name: PAI_TASK_INDEX
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.annotations['FC_TASK_INDEX']
    - name: NVIDIA_VISIBLE_DEVICES
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.annotations['hivedscheduler.microsoft.com/pod-leaf-cell-isolation']
    - name: HIVED_VISIBLE_DEVICES
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.annotations['hivedscheduler.microsoft.com/pod-leaf-cell-isolation']
    image: openpai/standard:python_3.6-pytorch_1.2.0-gpu
    imagePullPolicy: Always
    name: app
    resources:
      limits:
        cpu: "6"
        github.com/fuse: "1"
        hivedscheduler.microsoft.com/pod-scheduling-enable: "1"
        memory: 127051Mi
      requests:
        cpu: "6"
        github.com/fuse: "1"
        hivedscheduler.microsoft.com/pod-scheduling-enable: "1"
        memory: 127051Mi
    securityContext:
      capabilities:
        add:
        - SYS_ADMIN
        - IPC_LOCK
        - DAC_READ_SEARCH
        drop:
        - MKNOD
    terminationMessagePath: /tmp/pai-termination-log
    terminationMessagePolicy: FallbackToLogsOnError
    volumeMounts:
    - mountPath: /dev/shm
      name: dshm
    - mountPath: /usr/local/pai
      name: pai-vol
    - mountPath: /usr/local/pai/logs
      name: host-log
      subPath: admin/73eb1fc17260838b0f8853137c7b98e9/taskrole
    - mountPath: /usr/local/pai/ssh-secret
      name: job-ssh-secret-volume
      readOnly: true
    - mountPath: /usr/local/pai/user-extension-secrets
      name: user-extension-secrets
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: runtime-account-token-n68m4
      readOnly: true
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  hostNetwork: true
  imagePullSecrets:
  - name: pai-secret
  initContainers:
  - env:
    - name: FC_FRAMEWORK_NAMESPACE
      value: default
    - name: FC_FRAMEWORK_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9
    - name: FC_TASKROLE_NAME
      value: taskrole
    - name: FC_TASK_INDEX
      value: "0"
    - name: FC_CONFIGMAP_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9-attempt
    - name: FC_POD_NAME
      value: 73eb1fc17260838b0f8853137c7b98e9-taskrole-0
    - name: FC_FRAMEWORK_UID
      value: 8657e048-4fc8-447e-88f6-1345a224d89f
    - name: FC_FRAMEWORK_ATTEMPT_ID
      value: "2"
    - name: FC_FRAMEWORK_ATTEMPT_INSTANCE_UID
      value: 2_4d133447-b6f9-45bd-9fc7-580931428ac2
    - name: FC_CONFIGMAP_UID
      value: 4d133447-b6f9-45bd-9fc7-580931428ac2
    - name: FC_TASKROLE_UID
      value: 1591ddfd-bf89-11ec-ac74-828783dcb2e6
    - name: FC_TASK_UID
      value: 1591de14-bf89-11ec-ac74-828783dcb2e6
    - name: FC_TASK_ATTEMPT_ID
      value: "0"
    - name: FC_POD_UID
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.uid
    - name: FC_TASK_ATTEMPT_INSTANCE_UID
      value: 0_$(FC_POD_UID)
    - name: USER_CMD
      value: sleep 3600
    - name: KUBE_APISERVER_ADDRESS
      value: https://10.96.0.1:443
    - name: REST_SERVER_URI
      value: http://192.168.2.3:9186
    - name: GANG_ALLOCATION
      value: "true"
    - name: PAI_FRAMEWORK_NAME
      value: admin~admin_8ff14934
    - name: PAI_JOB_NAME
      value: admin~admin_8ff14934
    - name: PAI_USER_NAME
      value: admin
    - name: PAI_DEFAULT_FS_URI
    - name: PAI_TASK_ROLE_COUNT
      value: "1"
    - name: PAI_TASK_ROLE_LIST
      value: taskrole
    - name: PAI_VIRTUAL_CLUSTER
      value: vc2
    - name: PAI_TASK_ROLE_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_RESOURCE_taskrole
      value: 1,6,127051,0
    - name: PAI_MIN_FAILED_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_MIN_SUCCEEDED_TASK_COUNT_taskrole
      value: "1"
    - name: PAI_USERNAME
      value: admin
    - name: PAI_TASKS_NUM
      value: "1"
    - name: PAI_JOB_TASK_COUNT
      value: "1"
    - name: PAI_TASK_ROLES_NUM
      value: "1"
    - name: PAI_JOB_TASK_ROLE_COUNT
      value: "1"
    - name: PAI_JOB_TASK_ROLE_LIST
      value: taskrole
    - name: PAI_CURRENT_TASK_ROLE_NAME
      value: taskrole
    - name: PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.annotations['FC_TASK_INDEX']
    image: openpai/openpai-runtime:v1.8.0
    imagePullPolicy: Always
    name: init
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: FallbackToLogsOnError
    volumeMounts:
    - mountPath: /usr/local/pai
      name: pai-vol
    - mountPath: /usr/local/pai/logs
      name: host-log
      subPath: admin/73eb1fc17260838b0f8853137c7b98e9/taskrole
    - mountPath: /usr/local/pai-config
      name: job-exit-spec
    - mountPath: /usr/local/pai/user-extension-secrets
      name: user-extension-secrets
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: runtime-account-token-n68m4
      readOnly: true
  preemptionPolicy: PreemptLowerPriority
  priority: -1948634383
  priorityClassName: 73eb1fc17260838b0f8853137c7b98e9-priority
  restartPolicy: Never
  schedulerName: hivedscheduler-ds-vc2
  securityContext: {}
  serviceAccount: runtime-account
  serviceAccountName: runtime-account
  terminationGracePeriodSeconds: 30
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: 300
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: 300
  volumes:
  - emptyDir:
      medium: Memory
      sizeLimit: 512Mi
    name: dshm
  - emptyDir: {}
    name: pai-vol
  - hostPath:
      path: /var/log/pai
      type: ""
    name: host-log
  - name: job-ssh-secret-volume
    secret:
      defaultMode: 420
      secretName: job-ssh-secret
  - configMap:
      defaultMode: 420
      name: runtime-exit-spec-configuration
    name: job-exit-spec
  - name: user-extension-secrets
    secret:
      defaultMode: 420
      secretName: 73eb1fc17260838b0f8853137c7b98e9-usercred
  - name: runtime-account-token-n68m4
    secret:
      defaultMode: 420
      secretName: runtime-account-token-n68m4
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: "2022-04-20T00:21:50Z"
    message: '0/4 nodes are available: 1 Insufficient memory, 1 node(s) didn''t match
      node selector, 4 Insufficient github.com/fuse.'
    reason: Unschedulable
    status: "False"
    type: PodScheduled
  phase: Pending
  qosClass: Burstable